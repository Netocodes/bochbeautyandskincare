import{j as e,r as n,c as x,a as B,u as C,t as j}from"./index-wmWqGRZN.js";import{u as P}from"./index.esm-BMKIIJgM.js";import{m as k,g as A,t as E}from"./ToggleSwitch-CvuYZZA3.js";import{a as S}from"./axios-BxgaBfug.js";import{a as Y}from"./crumbs-SWKnEVyt.js";import F from"./error-page-C7ODn3LN.js";import"./vendor-DUt4hQxu.js";const H=t=>r=>{const a={};for(const s in r)t.includes(s)||(a[s]=r[s]);return a},M=t=>{const{children:r,className:a,horizontal:s,href:o,theme:c={}}=t,l=typeof o>"u"?"div":"a",h=D(t),u=k(A().card,c);return e.jsxs(l,{"data-testid":"flowbite-card",href:o,className:E(u.root.base,u.root.horizontal[s?"on":"off"],o&&u.root.href,a),...h,children:[e.jsx(R,{...t}),e.jsx("div",{className:u.root.children,children:r})]})},R=({theme:t={},...r})=>{const a=k(A().card,t);return r.renderImage?r.renderImage(a,r.horizontal??!1):r.imgSrc?e.jsx("img",{"data-testid":"flowbite-card-image",alt:r.imgAlt??"",src:r.imgSrc,className:E(a.img.base,a.img.horizontal[r.horizontal?"on":"off"])}):null},D=H(["renderImage","imgSrc","imgAlt","children","className","horizontal","href","theme"]),q=n.createContext(null),I=()=>n.useContext(q),J=n.memo(({header:t,footer:r,children:a,onStepChange:s,wrapper:o,startIndex:c=0})=>{const[l,h]=n.useState(c),[u,g]=n.useState(!1),f=n.useRef(!0),y=n.useRef(!1),m=n.useRef(()=>{}),p=n.Children.toArray(a).length;f.current=l<p-1,y.current=l>0;const d=n.useCallback(()=>{if(f.current){const i=l+1;h(i),s==null||s(i)}},[l,s]),b=n.useCallback(()=>{if(y.current){m.current=null;const i=l-1;h(i),s==null||s(i)}},[l,s]),w=n.useCallback(i=>{i>=0&&i<p&&(m.current=null,h(i),s==null||s(i))},[p,s]),z=n.useRef(i=>{m.current=i}),v=n.useCallback(async()=>{if(f.current&&m.current)try{g(!0),await m.current(),g(!1),m.current=null,d()}catch(i){throw g(!1),i}else d()},[d]),L=n.useMemo(()=>({nextStep:v,previousStep:b,handleStep:z.current,isLoading:u,activeStep:l,stepCount:p,isFirstStep:!y.current,isLastStep:!f.current,goToStep:w}),[v,b,u,l,p,w]),N=n.useMemo(()=>n.Children.toArray(a)[l],[l,a,t,r]),T=n.useMemo(()=>o?n.cloneElement(o,{children:N}):N,[o,N]);return n.createElement(q.Provider,{value:L},t,T,r)}),O=()=>{const{register:t,handleSubmit:r,formState:{isSubmitSuccessful:a}}=P(),{nextStep:s}=I(),o=c=>{window.sessionStorage.setItem("personalInfo",JSON.stringify(c)),setTimeout(()=>{s()},3e3)};return e.jsx("div",{children:e.jsxs("div",{className:"text-center w-full max-w-xl md:max-w-7xl mx-auto px-4 flex flex-col md:flex-row gap-y-8 gap-x-20 items-center  ",children:[e.jsx("h2",{className:"text-2xl md:text-4xl font-bold text-gray-700",children:"Who are we shipping to :"}),e.jsxs("form",{className:" mt-4",onSubmit:r(o),children:[e.jsx("input",{...t("fullname",{required:"Your full name is required"}),type:"text",placeholder:"Add your Full Name",className:"w-full p-2 py-4 px-5 text-md font-normal placeholder:text-gray-600 border rounded mb-4 text-gray-800"}),e.jsx("input",{...t("phoneNumber",{required:"Phone Number is required",validate:c=>isNaN(c)?"This Must be a Number":!0}),type:"text",placeholder:"Phone Number",className:"w-full p-2 py-4 px-5 text-md font-normal  placeholder:text-gray-600 border rounded mb-4 text-[#690a3a]"}),e.jsx("input",{...t("customerEmail",{required:"Your Email is required",validate:c=>c.includes("@")?!0:"Email Must include and @ symbol"}),type:"email",placeholder:"Input Your Working Email Here",className:"w-full p-2 py-4 px-5 text-md font-normal placeholder:text-gray-600 border rounded text-gray-800"}),e.jsx("div",{className:"flex items-center justify-around mt-6 ",children:e.jsx(x.Button,{type:"submit",children:a?e.jsx(x.Spinner,{className:"h-8 w-8",onPointerEnterCapture:void 0,onPointerLeaveCapture:void 0}):"next",className:"bg-[#8c2643] text-md  px-8 md:text-xl lowercase ",placeholder:void 0,onPointerEnterCapture:"",onPointerLeaveCapture:""})})]})]})})},W=()=>{const{previousStep:t,nextStep:r}=I(),{register:a,handleSubmit:s,formState:{isSubmitSuccessful:o}}=P(),c=l=>{window.sessionStorage.setItem("addressData",JSON.stringify(l)),setTimeout(()=>{r()},3e3)};return e.jsx("div",{children:e.jsxs("div",{className:"text-center w-full max-w-xl md:max-w-7xl mx-auto px-4 flex flex-col md:flex-row gap-y-8 gap-x-20 items-center  ",children:[e.jsx("h2",{className:"  py-4 px-8 leading-tight tracking-tight text-2xl md:text-4xl font-bold text-gray-700 ",children:"Where are we shipping it to :"}),e.jsxs("form",{className:" mt-4",onSubmit:s(c),children:[e.jsx("input",{type:"text",placeholder:"Add your Street / Home Address",...a("homeAdrress",{required:"Your Street Address is required"}),className:"w-full p-2 py-4 px-5 placeholder:text-gray-700 border rounded mb-4 text-gray-700"}),e.jsx("input",{type:"text",placeholder:"Add your City Here",...a("city",{required:"Your City is required to Locate you"}),className:"w-full p-2 py-4 px-5 placeholder:text-gray-700 border rounded mb-4 text-gray-700"}),e.jsx("input",{type:"text",placeholder:"Add your State Here",...a("state",{required:"Your State  is required"}),className:"w-full p-2 py-4 px-5 placeholder:text-gray-700 border rounded mb-4 text-gray-700"}),e.jsx("input",{type:"text",placeholder:"Add your Zip code Here",...a("zip",{required:"Your Zip Code is required"}),className:"w-full p-2 py-4 px-5 placeholder:text-gray-700 border rounded mb-4 text-gray-700"}),e.jsxs("div",{className:"flex items-center justify-between px-6 mt-6 ",children:[e.jsx(x.Button,{children:"go back",onClick:()=>{t()},className:"bg-[#8c2643] text-md  px-8 md:text-xl capitalize ",placeholder:void 0,onPointerEnterCapture:"",onPointerLeaveCapture:""}),e.jsx(x.Button,{children:o?e.jsx(x.Spinner,{className:"h-8 w-8",onPointerEnterCapture:void 0,onPointerLeaveCapture:void 0}):"Next",type:"submit",className:"bg-[#8c2643] text-md  px-8 md:text-xl capitalize ",placeholder:void 0,onPointerEnterCapture:"",onPointerLeaveCapture:""})]})]})]})})},Z=()=>{const[t,r]=n.useState(!1),a=B(),s=JSON.parse(window.sessionStorage.getItem("personalInfo")||"{}"),o=JSON.parse(window.sessionStorage.getItem("addressData")||"{}"),{cartItems:c,TotalPrice:l}=C(),h=l();if(!s||!o)return e.jsx("h1",{children:"Fill in the form"});const u={personalInfo:s,addressData:o,cartItems:c,total:h},g=async()=>{var f,y,m,p;r(!0);try{const d=await S.post("http://localhost:3000/send-email",{requestedData:u});console.log("This is the response from the backend",d.data),j.success(d.data.message),setTimeout(()=>{a("/verify-payment")},5e3)}catch(d){console.error(d),S.isAxiosError(d)?(j.error(((y=(f=d.response)==null?void 0:f.data)==null?void 0:y.error)||"Failed to send data"),console.log((p=(m=d.response)==null?void 0:m.data)==null?void 0:p.error)):j.error("An unexpected error occurred"),r(!1)}};return e.jsxs("div",{children:[e.jsxs(M,{className:"max-w-3xl p-6 mx-auto bg-white dark:bg-gray-800 shadow-md",children:[e.jsx("div",{className:"mb-4 flex items-center justify-between",children:e.jsx("h5",{className:"text-xl font-bold leading-none text-gray-900 dark:text-white",children:"Payment options: Bank Transfers"})}),e.jsx("div",{className:"flow-root",children:e.jsxs("ul",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("li",{className:"py-3 sm:py-4",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"shrink-0"}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"truncate text-sm font-medium text-gray-700 dark:text-white",children:"Bank Account Number"}),e.jsx("p",{className:"truncate text-3xl text-gray-800  font-semibold ",children:"8020705588"})]}),e.jsx("div",{className:"inline-flex items-center text-base font-semibold text-gray-900 dark:text-white",children:e.jsx(x.Button,{children:"Copy",className:"bg-[#8c2643] text-md  px-8 md:text-xl lowercase rounded-full",placeholder:void 0,onPointerEnterCapture:"",onPointerLeaveCapture:""})})]})}),e.jsx("li",{className:"py-3 sm:py-4",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"shrink-0"}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"truncate text-sm font-medium text-gray-700 dark:text-white",children:"Bank Account Name"}),e.jsx("p",{className:"truncate text-2xl text-gray-800 dark:text-gray-400",children:"Netochukwu Ronaldo Amaugo"})]}),e.jsx("div",{className:"inline-flex items-center text-base font-semibold text-gray-900 dark:text-white",children:"$367"})]})}),e.jsx("li",{className:"pb-0 pt-3 sm:pt-4",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"shrink-0"}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"truncate text-sm font-medium text-gray-700 dark:text-white",children:"Bank Name"}),e.jsx("p",{className:"truncate text-2xl text-gray-800 ",children:"Palmplay Nigeria"})]}),e.jsx("div",{className:"inline-flex items-center text-base font-semibold text-gray-900 dark:text-white",children:e.jsx(x.Button,{children:"Copy",className:"bg-[#8c2643] text-md  px-5 md:text-xl lowercase rounded-full",placeholder:void 0,onPointerEnterCapture:"",onPointerLeaveCapture:""})})]})})]})})]}),e.jsx("div",{className:"flex items-center justify-center py-6",children:e.jsx(x.Button,{children:t?e.jsx(x.Spinner,{className:"h-8 w-8",onPointerEnterCapture:void 0,onPointerLeaveCapture:void 0}):"Submit",onClick:g,disabled:t,className:"bg-[#8c2643] text-md  md:text-xl capitalize rounded-full",placeholder:void 0,onPointerEnterCapture:"",onPointerLeaveCapture:""})})]})},$=()=>e.jsx("div",{className:"w-full",children:e.jsxs(J,{children:[e.jsx(O,{}),e.jsx(W,{}),e.jsx(Z,{})]})}),ee=()=>{const{cartItems:t}=C();return e.jsxs("div",{className:"w-full h-full py-12",children:[e.jsx(Y,{}),t.length==0?e.jsx("div",{children:e.jsx(F,{})}):e.jsx("div",{className:"w-full py-20 flex items-center justify-center bg-gray-300 text-white",children:e.jsx($,{})})]})};export{ee as default};
